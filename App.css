/* Main View Grid Layout */
.view-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 1rem;
    height: 100%;
}

/* =======================================================================
 * ARAS Lab Specific Layouts
 * ======================================================================= */

/* --- Control Room Layout --- */
.control-room-grid {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    grid-template-rows: auto 1fr;
    gap: 1rem;
    height: 100%;
    grid-template-areas:
        "videowall agent"
        "systems   agent";
}
.cr-videowall { grid-area: videowall; }
.cr-systems { grid-area: systems; }
.cr-agent { grid-area: agent; }

.systems-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    height: 100%;
}

.video-wall-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: 0.5rem;
    height: 300px; /* Example fixed height */
    background: #000;
    padding: 0.5rem;
    border: 1px solid var(--lcars-secondary);
}
.video-feed {
    background: #111;
    border: 1px solid #333;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-size: 0.8rem;
    color: #888;
    position: relative;
    overflow: hidden;
}
.video-feed::before { /* Scanline effect */
    content: "";
    position: absolute;
    top: 0;
    width: 100%;
    height: 2px;
    background: rgba(153, 204, 255, 0.2);
    animation: scanline 4s linear infinite;
}
@keyframes scanline {
    from { transform: translateY(0); }
    to { transform: translateY(100%); }
}
.video-feed .label {
    background: rgba(0,0,0,0.7);
    padding: 2px 8px;
}
.live-dot {
    color: var(--status-error);
    animation: pulse-red 2s infinite;
    font-family: 'Orbitron', sans-serif;
}
@keyframes pulse-red { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

/* --- Main Robotics Bay Layout --- */
.main-bay-grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    grid-template-rows: auto 1fr;
    gap: 1rem;
    height: 100%;
    grid-template-areas:
        "controls visual"
        "log      visual";
}
.mb-controls { grid-area: controls; }
.mb-visual { grid-area: visual; background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(https://www.allstartennissupply.com/images/stories/virtuemart/product/black-pvc-coated-chain-link-fabric-1.jpg); background-size: cover; }
.mb-log { grid-area: log; }

/* New layout for upgraded view */
.main-bay-grid-upgraded {
    display: grid;
    grid-template-columns: 2fr 1fr;
    grid-template-rows: auto 1fr;
    gap: 1rem;
    height: 100%;
    grid-template-areas:
        "infra support"
        "infra log";
}
.mb-infra-panel { grid-area: infra; }
.mb-support-panel { grid-area: support; display: flex; flex-direction: column; gap: 1rem; }
.mb-log-panel { grid-area: log; }


.operations-log-feed {
    font-family: monospace;
    font-size: 0.9rem;
    height: 100%;
    overflow-y: auto;
    background: #000;
    padding: 0.5rem;
    border: 1px solid var(--lcars-secondary);
}

/* --- Fabrication Workshop Layout --- */
.fabrication-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    grid-template-rows: auto 1fr;
    gap: 1rem;
    height: 100%;
    grid-template-areas:
        "printers cnc laser"
        "inventory inventory safety";
}
.fab-printers { grid-area: printers; }
.fab-cnc { grid-area: cnc; }
.fab-laser { grid-area: laser; }
.fab-inventory { grid-area: inventory; }
.fab-safety { grid-area: safety; }

.machine-status .job {
    font-size: 0.8rem;
    color: #ccc;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.machine-status .status-indicator {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
}
.status-printing { color: var(--status-active); }
.status-idle { color: var(--status-nominal); }
.status-maintenance { color: var(--lcars-secondary); }

/* --- HRI / Electronics / Logistics Layouts --- */
.zonal-view-grid { /* Generic grid for simpler views */
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
}

/* Morpho-Adaptive Robotics (Eta-7) Dashboard Layout - NEW */
.eta-operational-dashboard {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto 1fr;
    gap: 1.5rem;
    height: 100%;
    grid-template-areas:
        "title title"
        "infra integration";
}
.eta-title-bar { grid-area: title; }
.eta-infra-panel { grid-area: infra; }
.eta-integration-panel { grid-area: integration; }

.eta-op-section {
    border: 1px solid var(--lcars-secondary);
    background-color: rgba(10, 10, 20, 0.6);
    padding: 0.75rem;
    margin-bottom: 1rem;
}
.eta-op-section h4 {
    font-family: 'Orbitron', sans-serif;
    color: var(--lcars-tertiary);
    border-bottom: 1px solid var(--lcars-tertiary);
    padding-bottom: 0.5rem;
    margin: 0 0 0.75rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.status-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}
.status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}
.status-dot.active, .status-dot.online, .status-dot.operational, .status-dot.streaming {
    background-color: var(--status-nominal);
    animation: pulse-green 2s infinite;
}
.status-dot.standby {
    background-color: var(--status-active);
}
.status-dot.moving {
    background-color: var(--status-active);
    animation: pulse-yellow 1s infinite;
}
.metrics-group {
    background: rgba(0, 0, 0, 0.3);
    border-left: 3px solid var(--lcars-primary);
    padding: 0.5rem;
    font-size: 0.85rem;
    margin-top: 0.5rem;
}
.sub-panel {
    margin: 0.5rem 0;
}
.sub-panel-title {
    font-weight: bold;
    color: var(--lcars-secondary);
}
.protocol-item {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
}
.protocol-item .interface-name {
    font-weight: bold;
    color: var(--lcars-tertiary);
}
.protocol-item .protocol-details {
    display: block;
    font-size: 0.8rem;
    color: #ccc;
    padding-left: 1rem;
}


@keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(102, 204, 102, 0.7); } 70% { box-shadow: 0 0 0 8px rgba(102, 204, 102, 0); } 100% { box-shadow: 0 0 0 0 rgba(102, 204, 102, 0); } }
@keyframes pulse-yellow { 0% { box-shadow: 0 0 0 0 rgba(255, 204, 0, 0.7); } 70% { box-shadow: 0 0 0 8px rgba(255, 204, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 204, 0, 0); } }

.execution-subsection {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px dashed var(--lcars-secondary);
}

/* Direct Control Interface */
.direct-control-panel {
    background: rgba(0,0,0,0.4);
    border: 1px solid var(--lcars-tertiary);
    padding: 0.5rem;
    margin-top: 1rem;
}
.control-feedback-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
    font-size: 0.8rem;
    margin-bottom: 0.5rem;
}
.control-input-group {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    margin: 0.5rem 0;
}
.control-input-group label {
    font-weight: bold;
    font-size: 0.8rem;
}
.control-input-group input[type="number"] {
    width: 60px;
    padding: 2px 4px;
    font-size: 0.8rem;
}
.control-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
}
.control-actions button {
    flex-grow: 1;
    font-size: 0.8rem;
    padding: 0.25rem;
}

/* Neuromorphic (Theta-8) Dashboard Layout */
.theta-dashboard {
    display: grid;
    grid-template-columns: 1fr 2fr;
    grid-template-rows: auto 1fr;
    gap: 1rem;
    height: 100%;
    grid-template-areas:
        "hardware visualizer"
        "models   visualizer"
        "offload  visualizer";
}
.theta-hardware { grid-area: hardware; }
.theta-models { grid-area: models; }
.theta-offload { grid-area: offload; }
.theta-visualizer { grid-area: visualizer; }
.event-stream-visualizer {
    background: #000;
    border: 1px solid var(--lcars-secondary);
    position: relative;
    overflow: hidden;
}
.event-spike {
    position: absolute;
    width: 2px;
    height: 2px;
    background: var(--lcars-primary);
    border-radius: 50%;
    opacity: 0;
    animation: spike-travel 2s ease-out forwards;
}
@keyframes spike-travel {
    0% { transform: translateX(0); opacity: 1; }
    99% { transform: translateX(calc(var(--end-x) * 1px - var(--start-x) * 1px)); opacity: 1;}
    100% { transform: translateX(calc(var(--end-x) * 1px - var(--start-x) * 1px)); opacity: 0;}
}